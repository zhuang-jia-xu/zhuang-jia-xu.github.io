(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1877)}])},1877:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=n(5893),a=n(7294),s=n(9477);class r extends s.aNw{constructor(e){super(e)}load(e,t,n,i){const a=this,r=new s.hH6(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(a.withCredentials),r.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(s){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const i=a.parse(n);t&&t(i)}),n,i)}parse(e){return new o(e)}}class o{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],i=function(e,t,n){const i=Array.from(e),a=t/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*a,r=[];let o=0,c=0;for(let l=0;l<i.length;l++){const e=i[l];if("\n"===e)o=0,c-=s;else{const t=h(e,a,o,c,n);o+=t.offsetX,r.push(t.path)}}return r}(e,t,this.data);for(let a=0,s=i.length;a<s;a++)Array.prototype.push.apply(n,i[a].toShapes());return n}}function h(e,t,n,i,a){const r=a.glyphs[e]||a.glyphs["?"];if(!r)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+a.familyName+".");const o=new s.T_1;let h,c,l,u,d,p,v,g;if(r.o){const e=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let a=0,s=e.length;a<s;){switch(e[a++]){case"m":h=e[a++]*t+n,c=e[a++]*t+i,o.moveTo(h,c);break;case"l":h=e[a++]*t+n,c=e[a++]*t+i,o.lineTo(h,c);break;case"q":l=e[a++]*t+n,u=e[a++]*t+i,d=e[a++]*t+n,p=e[a++]*t+i,o.quadraticCurveTo(d,p,l,u);break;case"b":l=e[a++]*t+n,u=e[a++]*t+i,d=e[a++]*t+n,p=e[a++]*t+i,v=e[a++]*t+n,g=e[a++]*t+i,o.bezierCurveTo(d,p,v,g,l,u)}}}return{offsetX:r.ha*t,path:o}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}o.prototype.isFont=!0;var d=function(){function e(t,n,i,a){c(this,e),this.font=t,this.text=i,this.particle=n,this.container=a,this.scene=new s.xsS,this.createCamera(),this.createRenderer(),this.setup(),this.bindEvents()}return u(e,[{key:"bindEvents",value:function(){window.addEventListener("resize",this.onWindowResize.bind(this))}},{key:"setup",value:function(){this.camera&&this.renderer&&(this.createParticles=new p(this.scene,this.font,this.particle,this.camera,this.renderer,this.text))}},{key:"render",value:function(){this.createParticles&&this.createParticles.render(),this.renderer&&this.camera&&this.renderer.render(this.scene,this.camera)}},{key:"createCamera",value:function(){this.camera=new s.cPb(65,this.container.clientWidth/this.container.clientHeight,1,1e4),this.camera.position.set(0,0,100)}},{key:"createRenderer",value:function(){var e=this;this.renderer=new s.CP7,this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.outputEncoding=s.knz,this.container.appendChild(this.renderer.domElement),this.renderer.setAnimationLoop((function(){e.render()}))}},{key:"onWindowResize",value:function(){this.camera&&this.renderer&&(this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight))}}]),e}(),p=function(){function e(t,n,i,a,r,o){c(this,e),this.scene=t,this.font=n,this.text=o,this.particleImg=i,this.camera=a,this.renderer=r,this.raycaster=new s.iMs,this.mouse=new s.FM8(-200,200),this.colorChange=new s.Ilk,this.buttom=!1,this.data={text:this.text,amount:1500,particleSize:1.5,particleColor:16777215,textSize:Math.min(16,window.screen.width/15/8),area:50,ease:.05},this.setup(),this.bindEvents()}return u(e,[{key:"setup",value:function(){var e=new s._12(this.visibleWidthAtZDepth(100,this.camera),this.visibleHeightAtZDepth(100,this.camera)),t=new s.vBJ({color:65280,transparent:!0});this.planeArea=new s.Kj0(e,t),this.planeArea.visible=!1,this.createText()}},{key:"bindEvents",value:function(){document.addEventListener("mousedown",this.onMouseDown.bind(this)),document.addEventListener("mousemove",this.onMouseMove.bind(this)),document.addEventListener("mouseup",this.onMouseUp.bind(this))}},{key:"onMouseDown",value:function(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1;var t=new s.Pa4(this.mouse.x,this.mouse.y,.5);t.unproject(this.camera);var n=t.sub(this.camera.position).normalize(),i=-this.camera.position.z/n.z;this.currenPosition=this.camera.position.clone().add(n.multiplyScalar(i)),this.buttom=!0,this.data.ease=.01}},{key:"onMouseUp",value:function(){this.buttom=!1,this.data.ease=.05}},{key:"onMouseMove",value:function(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1}},{key:"render",value:function(){var e=.001*performance.now()%12/12,t=(1+Math.sin(2*e*Math.PI))/6;this.raycaster.setFromCamera(this.mouse,this.camera);var n=this.planeArea&&this.raycaster.intersectObject(this.planeArea);if(n&&n.length>0){var i,a,s,r,o=null===(i=this.particles)||void 0===i?void 0:i.geometry.attributes.position,h=null===(a=this.geometryCopy)||void 0===a?void 0:a.attributes.position,c=null===(s=this.particles)||void 0===s?void 0:s.geometry.attributes.customColor,l=null===(r=this.particles)||void 0===r?void 0:r.geometry.attributes.size,u=n[0].point.x,d=n[0].point.y;n[0].point.z;if(o&&h&&c&&l)for(var p=0,v=o.count;p<v;p++){var g=h.getX(p),f=h.getY(p),m=h.getZ(p),y=o.getX(p),w=o.getY(p),b=o.getZ(p);this.colorChange.setHSL(.5,1,1),c.setXYZ(p,this.colorChange.r,this.colorChange.g,this.colorChange.b),c.needsUpdate=!0,l.array[p]=this.data.particleSize,l.needsUpdate=!0;var C,x,M=this.distance(u,d,y,w),k=(C=u-y)*C+(x=d-w)*x,P=-this.data.area/k;if(this.buttom){var z=Math.atan2(x,C);y-=P*Math.cos(z),w-=P*Math.sin(z),this.colorChange.setHSL(.5+t,1,.5),c.setXYZ(p,this.colorChange.r,this.colorChange.g,this.colorChange.b),c.needsUpdate=!0,(y>g+70||y<g-70||w>f+70||w<f-70)&&(this.colorChange.setHSL(.15,1,.5),c.setXYZ(p,this.colorChange.r,this.colorChange.g,this.colorChange.b),c.needsUpdate=!0)}else if(M<this.data.area){if(p%5===0){var _=Math.atan2(x,C);y-=.03*Math.cos(_),w-=.03*Math.sin(_),this.colorChange.setHSL(.15,1,.5),c.setXYZ(p,this.colorChange.r,this.colorChange.g,this.colorChange.b),c.needsUpdate=!0,l.array[p]=this.data.particleSize/1.2,l.needsUpdate=!0}else{var S=Math.atan2(x,C);y+=P*Math.cos(S),w+=P*Math.sin(S),o.setXYZ(p,y,w,b),o.needsUpdate=!0,l.array[p]=1.3*this.data.particleSize,l.needsUpdate=!0}(y>g+10||y<g-10||w>f+10||w<f-10)&&(this.colorChange.setHSL(.15,1,.5),c.setXYZ(p,this.colorChange.r,this.colorChange.g,this.colorChange.b),c.needsUpdate=!0,l.array[p]=this.data.particleSize/1.8,l.needsUpdate=!0)}y+=(g-y)*this.data.ease,w+=(f-w)*this.data.ease,b+=(m-b)*this.data.ease,o.setXYZ(p,y,w,b),o.needsUpdate=!0}}}},{key:"createText",value:function(){var e=[],t=this.font.generateShapes(this.data.text,this.data.textSize),n=new s.oa8(t);n.computeBoundingBox();var i=n.boundingBox&&-.5*(n.boundingBox.max.x-n.boundingBox.min.x),a=n.boundingBox&&(n.boundingBox.max.y-n.boundingBox.min.y)/2.85;n.center();for(var r=[],o=0;o<t.length;o++){var h=t[o];if(h.holes&&h.holes.length>0)for(var c=0;c<h.holes.length;c++){var l=h.holes[c];r.push(l)}}t.push.apply(t,r);for(var u=[],d=[],p=0;p<t.length;p++){var v=this,g=t[p],f="Path"===g.type?this.data.amount/2:this.data.amount;g.getSpacedPoints(f).forEach((function(t,n){var i=new s.Pa4(t.x,t.y,0);e.push(i),u.push(v.colorChange.r,v.colorChange.g,v.colorChange.b),d.push(1)}))}var m=(new s.u9r).setFromPoints(e);m.translate(i,a,0),m.setAttribute("customColor",new s.a$l(u,3)),m.setAttribute("size",new s.a$l(d,1));var y=new s.jyz({uniforms:{color:{value:new s.Ilk(16777215)},pointTexture:{value:this.particleImg}},vertexShader:"attribute float size;\n            attribute vec3 customColor;\n            varying vec3 vColor;\n\n            void main() {\n\n              vColor = customColor;\n              vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n              gl_PointSize = size * ( 300.0 / -mvPosition.z );\n              gl_Position = projectionMatrix * mvPosition;\n\n            }",fragmentShader:"uniform vec3 color;\n            uniform sampler2D pointTexture;\n\n            varying vec3 vColor;\n\n            void main() {\n\n              gl_FragColor = vec4( color * vColor, 1.0 );\n              gl_FragColor = gl_FragColor * texture2D( pointTexture, gl_PointCoord );\n\n            }",blending:s.WMw,depthTest:!1,transparent:!0});this.particles=new s.woe(m,y),this.scene.add(this.particles),this.geometryCopy=new s.u9r,this.geometryCopy.copy(this.particles.geometry)}},{key:"visibleHeightAtZDepth",value:function(e,t){var n=t.position.z;e<n?e-=n:e+=n;var i=t.fov*Math.PI/180;return 2*Math.tan(i/2)*Math.abs(e)}},{key:"visibleWidthAtZDepth",value:function(e,t){return this.visibleHeightAtZDepth(e,t)*t.aspect}},{key:"distance",value:function(e,t,n,i){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-i,2))}}]),e}(),v=n(5115),g=n.n(v),f=function(e){var t=e.text,n=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e=new s.lLk,i=null;new r(e).load("/assets/fonts/PoiretOne_Regular.json",(function(e){i=e}));var a=new s.dpR(e).load("/assets/images/particle.png");e.onLoad=function(){i&&new d(i,a,t,n.current)}})),(0,i.jsx)("div",{className:g().container,ref:n})},m=function(){return(0,i.jsx)("div",{children:(0,i.jsx)(f,{text:"Max\nChuang"})})}},5115:function(e){e.exports={container:"ParticleTexts_container__yLzHi"}}},function(e){e.O(0,[737,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);